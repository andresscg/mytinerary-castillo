(this["webpackJsonpmytinerary-castillo"]=this["webpackJsonpmytinerary-castillo"]||[]).push([[0],{100:function(e,t,n){},119:function(e,t,n){},120:function(e,t,n){},121:function(e,t,n){},132:function(e,t,n){},133:function(e,t,n){},134:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n(18),r=n.n(s),c=(n(22),n(57),n(7)),i=n(6),o=n(4),l=n(13),u=n(47),m=n.n(u),d=(n(68),n(3)),j=n.n(d),b=n(8),p=n(11),h=n.n(p),O={signUp:function(e){return function(){var t=Object(b.a)(j.a.mark((function t(n,a){var s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.a.post("https://mytinerary-castillo.herokuapp.com/api/users/signup",e);case 2:return s=t.sent,t.prev=3,s.data.success&&n({type:"SIGN_IN",payload:s.data.response}),t.abrupt("return",s);case 8:t.prev=8,t.t0=t.catch(3),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(e,n){return t.apply(this,arguments)}}()},signIn:function(e){return function(){var t=Object(b.a)(j.a.mark((function t(n,a){var s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.post("https://mytinerary-castillo.herokuapp.com/api/users/signin",e);case 3:return(s=t.sent).data.success&&n({type:"SIGN_IN",payload:s.data.response}),t.abrupt("return",s);case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n){return t.apply(this,arguments)}}()},signOut:function(){return function(e,t){e({type:"SIGN_OUT"})}},signInLocalStorage:function(e){return function(){var t=Object(b.a)(j.a.mark((function t(n,a){var s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.get("https://mytinerary-castillo.herokuapp.com/api/verifyToken",{headers:{Authorization:"Bearer "+e}});case 3:s=t.sent,n({type:"SIGN_IN",payload:{token:e,firstName:s.data.firstName,photoUrl:s.data.photoUrl,_id:s.data._id}}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}()}},f=n(1),g=function(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),s=n[0],r=n[1],u=function(){return r(!1)},d=Object(a.useState)(!1),j=Object(i.a)(d,2),b=j[0],p=j[1],h=Object(o.b)(),g=Object(o.c)((function(e){return e.users})),x=g.token,v=g.firstName,y=g.photoUrl,N=m()(1),k=N.buttonProps,C=N.isOpen,w=b?Object(f.jsxs)("li",{className:"nav-item dropdown",children:[Object(f.jsxs)("button",Object(c.a)(Object(c.a)({className:"nav-links"},k),{},{children:[Object(f.jsx)("div",{className:"user-photo",style:{backgroundImage:"url(".concat(y,")")}}),Object(f.jsx)("i",{className:"fas fa-angle-down"})]})),Object(f.jsx)("div",{className:C?"visible":"",role:"menu",children:Object(f.jsx)("p",{className:"drop-link",onClick:function(){h(O.signOut()),p(!1)},children:"Sign Out"})})]}):Object(f.jsx)("li",{className:"nav-item",children:Object(f.jsx)("i",{className:"fas fa-user-circle user nav-links-icon"})});return Object(a.useEffect)((function(){x&&p(!0)}),[x]),Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("nav",{className:"navbar",children:Object(f.jsxs)("div",{className:"navbar-container",children:[Object(f.jsx)(l.b,{to:"/",className:"navbar-logo",onClick:u,children:Object(f.jsx)("img",{src:"/assets/logo.svg",alt:"Logo"})}),Object(f.jsx)("div",{className:"menu-icon",onClick:function(){return r(!s)},children:Object(f.jsx)("i",{className:s?"fas fa-times":"fas fa-bars"})}),Object(f.jsxs)("ul",{className:s?"nav-menu active":"nav-menu",children:[Object(f.jsx)("li",{className:"nav-item",children:Object(f.jsx)(l.b,{to:"/",className:"nav-links",onClick:u,children:"Home"})}),Object(f.jsx)("li",{className:"nav-item",children:Object(f.jsx)(l.b,{to:"/cities",className:"nav-links",onClick:u,children:"Cities"})}),b&&Object(f.jsx)("li",{className:"nav-item",children:Object(f.jsxs)("p",{className:"user-name",children:["Welcome, ",v]})}),!b&&Object(f.jsx)("li",{className:"nav-item",children:Object(f.jsx)(l.b,{to:"/sign",className:"nav-links",onClick:u,children:"Sign In/Up"})}),w]})]})})})},x=n(10),v=(n(91),n(92),["btn-medium","btn-large"]),y=function(e){var t=e.children,n=e.buttonSize,a=e.path,s=v.includes(n)?n:v[0];return Object(f.jsx)(l.b,{to:"".concat(a),className:"btn-mobile",children:Object(f.jsx)("button",{className:"button button-primary ".concat(s),children:t})})},N=function(){return Object(f.jsxs)("div",{className:"hero-container",children:[Object(f.jsx)("video",{src:"/assets/bg-video.mp4",autoPlay:!0,loop:!0,muted:!0}),Object(f.jsx)("h1",{children:"MyTinerary"}),Object(f.jsx)("p",{children:"Find your perfect trip, designed by insiders who know and love their cities!"}),Object(f.jsx)(y,{className:"button",buttonSize:"btn-large",path:"/cities",children:"Find your next experience"})]})},k=(n(93),function(e){return Object(f.jsxs)("div",{className:"cardContainer",style:{backgroundImage:"url(".concat(e.bgUrl,")")},children:[Object(f.jsx)("h3",{className:"cardText",children:e.cityName}),Object(f.jsx)("p",{className:"cardSubtitle",children:e.country})]})}),C=(n(94),n(26)),w=[[{name:"Bogota",country:"Colombia",img:"assets/bogota.jpg"},{name:"New York",country:"USA",img:"assets/newyork.jpg"},{name:"Paris",country:"France",img:"assets/paris.jpg"},{name:"Munich",country:"Germany",img:"assets/munich.jpg"}],[{name:"Tokyo",country:"Japan",img:"assets/tokyo.jpg"},{name:"Amsterdam",country:"Netherlands",img:"assets/amsterdam.jpg"},{name:"Cairo",country:"Egypt",img:"assets/cairo.jpg"},{name:"Cancun",country:"Mexico",img:"assets/cancun.jpg"}],[{name:"Victoria",country:"Seychelles",img:"assets/victoria.jpg"},{name:"Sydney",country:"Australia",img:"assets/sydney.jpg"},{name:"Istambul",country:"Turkey",img:"assets/istambul.jpg"},{name:"Prague",country:"Czech Republic",img:"assets/prague.jpg"}]],I=function(){return Object(f.jsxs)("div",{className:"carousel-section",style:{backgroundImage:'linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.7)), url("assets/carBg.jpg")'},children:[Object(f.jsx)("h2",{className:"carousel-section__title",children:"Popular MyTineraries"}),Object(f.jsx)(C.a,{className:"carousel",autoplay:!0,autplayInterval:2e3,wrapAround:!0,animation:"zoom",cellAlign:"center",slidesToShow:1,children:w.map((function(e,t){return Object(f.jsx)("div",{className:"car-slide",children:e.map((function(e,t){return Object(f.jsx)(k,{bgUrl:e.img,cityName:e.name,country:e.country},t)}))},t)}))})]})},S=function(){return Object(a.useEffect)((function(){window.scrollTo(0,0)}),[]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(N,{}),Object(f.jsx)(I,{})]})},_=n(19),E=n(25),U=(n(29),n(9)),B=function(e){var t=Object(o.b)(),n=Object(a.useState)({email:"",password:""}),s=Object(i.a)(n,2),r=s[0],l=s[1],u=function(e){var t=e.target.value,n=e.target.name;l(Object(c.a)(Object(c.a)({},r),{},Object(_.a)({},n,t)))},m=function(){var e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&n.preventDefault(),""!==r.email&&""!==r.password){e.next=5;break}U.b.error("Ups! All fields are required",{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.next=16;break;case 5:return e.prev=5,e.next=8,t(O.signIn(r));case 8:e.sent.data.success?U.b.success("Signed in successfully, welcome back!",{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):U.b.warn("Problem signing in, maybe your email or password are incorrect!",{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(5),console.error(e.t0),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(b.a)(j.a.mark((function e(n){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={email:n.profileObj.email,password:n.profileObj.googleId,flagGoogle:!0},e.prev=1,e.next=4,t(O.signIn(a));case 4:e.sent.data.success?U.b.success("Signed in successfully, welcome back!",{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):U.b.warn("Problem signing in!",{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("form",{action:"#",className:"sign-in-form",children:[Object(f.jsx)("h2",{className:"title",children:"Sign In"}),Object(f.jsxs)("div",{className:"input-field",children:[Object(f.jsx)("i",{className:"fas fa-user"}),Object(f.jsx)("input",{type:"text",placeholder:"Email",name:"email",value:r.email,onChange:u})]}),Object(f.jsxs)("div",{className:"input-field",children:[Object(f.jsx)("i",{className:"fas fa-lock"}),Object(f.jsx)("input",{type:"password",placeholder:"Password",name:"password",value:r.password,onChange:u})]}),Object(f.jsx)("button",{onClick:m,className:"btn solid",children:"SIGN IN"}),Object(f.jsx)("p",{className:"social-text",children:"Or Sign In With Google"}),Object(f.jsx)("div",{className:"social-media",children:Object(f.jsx)(E.GoogleLogin,{clientId:"489964022885-77e9lbhf9smup5vb53d29f6nr34s32u3.apps.googleusercontent.com",buttonText:"Sign Up With Google",onSuccess:d,onFailure:d,cookiePolicy:"single_host_origin"})})]})},T=(n(99),function(e){var t=Object(o.b)(),n=Object(a.useState)([]),s=Object(i.a)(n,2),r=s[0],l=s[1],u=Object(a.useState)({firstName:"",lastName:"",email:"",password:"",country:"",photoUrl:""}),m=Object(i.a)(u,2),d=m[0],p=m[1];Object(a.useEffect)((function(){h.a.get("https://restcountries.com/v3.1/all").then((function(e){return l(e.data)})).catch((function(e){return console.error(e)}))}),[]);var g=function(e){var t=e.target.value,n=e.target.name;p(Object(c.a)(Object(c.a)({},d),{},Object(_.a)({},n,t)))},x=function(){var e=Object(b.a)(j.a.mark((function e(n){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&n.preventDefault(),!Object.values(d).some((function(e){return""===e}))){e.next=5;break}U.b.warn("Ups! All fields are required!",{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.next=16;break;case 5:return e.prev=5,e.next=8,t(O.signUp(d));case 8:(a=e.sent).data.success?U.b.success("Signed in successfully, welcome back!",{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):a.data.errors?a.data.errors.map((function(e){return U.b.error(e.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})})):U.b.error(a.data.error,{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(5),console.error(e.t0),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(b.a)(j.a.mark((function e(n){var a,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={firstName:n.profileObj.givenName,lastName:n.profileObj.familyName,email:n.profileObj.email,password:n.profileObj.googleId,photoUrl:n.profileObj.imageUrl,country:"Argentina",google:!0},e.prev=1,e.next=4,t(O.signUp(a));case 4:(s=e.sent).data.success?U.b.success("Signed in successfully, welcome back!",{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):U.b.warn(s.data.error,{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("form",{className:"sign-up-form",children:[Object(f.jsx)("h2",{className:"title",children:"Sign Up"}),Object(f.jsxs)("div",{className:"name-input",children:[Object(f.jsxs)("div",{className:"input-field",children:[Object(f.jsx)("i",{className:"fas fa-user"}),Object(f.jsx)("input",{type:"text",placeholder:"First Name",name:"firstName",value:d.firstName,onChange:g})]}),Object(f.jsxs)("div",{className:"input-field",children:[Object(f.jsx)("i",{className:"fas fa-user"}),Object(f.jsx)("input",{type:"text",placeholder:"Last Name",name:"lastName",value:d.lastName,onChange:g})]})]}),Object(f.jsxs)("div",{className:"input-field",children:[Object(f.jsx)("i",{className:"fas fa-envelope"}),Object(f.jsx)("input",{type:"email",placeholder:"Email",name:"email",value:d.email,onChange:g})]}),Object(f.jsxs)("div",{className:"input-field",children:[Object(f.jsx)("i",{className:"fas fa-lock"}),Object(f.jsx)("input",{type:"password",placeholder:"Password",name:"password",value:d.password,onChange:g})]}),Object(f.jsxs)("div",{className:"input-field",children:[Object(f.jsx)("i",{className:"fas fa-lock"}),Object(f.jsx)("input",{type:"text",placeholder:"Profile Pic URL",name:"photoUrl",value:d.photoUrl,onChange:g})]}),Object(f.jsxs)("div",{className:"input-field",children:[Object(f.jsx)("i",{className:"fas fa-lock"}),Object(f.jsxs)("select",{type:"text",name:"country",className:"country-select",value:d.country,onChange:g,children:[Object(f.jsx)("option",{disabled:!0,value:"Select your country",children:"Select your country"}),r.sort((function(e,t){return e.name.common>t.name.common?1:e.name.common<t.name.common?-1:0})).map((function(e){return Object(f.jsx)("option",{value:e.name.common,children:e.name.common},e.name.common)}))]})]}),Object(f.jsxs)("div",{className:"sign-btns",children:[Object(f.jsx)("button",{className:"btn sign-up-btn",onClick:x,children:"SIGN UP"}),Object(f.jsxs)("div",{className:"social-media",children:[Object(f.jsx)("p",{className:"social-text",children:"Or Sign Up With Google"}),Object(f.jsx)(E.GoogleLogin,{clientId:"489964022885-77e9lbhf9smup5vb53d29f6nr34s32u3.apps.googleusercontent.com",buttonText:"Sign Up With Google",onSuccess:v,onFailure:v,cookiePolicy:"single_host_origin"})]})]})]})}),P=function(e){var t=Object(o.c)((function(e){return e.users.token}));Object(a.useEffect)((function(){t&&e.history.push("/")}));var n=Object(a.useState)("signIn"),s=Object(i.a)(n,2),r=s[0],c=s[1],l=function(){c("signIn"===r?"signUp":"signIn")},u="signUp"===r?"sign-up-mode":"";return Object(f.jsxs)("div",{className:"container-sign ".concat(u),children:[Object(f.jsx)("div",{className:"forms-container",children:Object(f.jsxs)("div",{className:"signin-signup",children:[Object(f.jsx)(B,{}),Object(f.jsx)(T,{})]})}),Object(f.jsxs)("div",{className:"panels-container",children:[Object(f.jsxs)("div",{className:"panel left-panel",children:[Object(f.jsxs)("div",{className:"content",children:[Object(f.jsx)("h3",{children:"New here?"}),Object(f.jsx)("p",{children:"Sign up here to find your next experience and share yours as well!"}),Object(f.jsx)("button",{className:"btn transparent",id:"sign-up-btn",onClick:l,children:"Sign up"})]}),Object(f.jsx)("img",{src:"assets/log.svg",className:"image",alt:""})]}),Object(f.jsxs)("div",{className:"panel right-panel",children:[Object(f.jsxs)("div",{className:"content",children:[Object(f.jsx)("h3",{children:"One of us?"}),Object(f.jsx)("p",{children:"If you already have an account and want to continue searching and sharing experiences, sign in here!"}),Object(f.jsx)("button",{className:"btn transparent",id:"sign-in-btn",onClick:l,children:"Sign in"})]}),Object(f.jsx)("img",{src:"assets/register.svg",className:"image",alt:""})]})]})]})},A=(n(100),function(e){return Object(f.jsxs)("div",{className:"cityContainer",style:{backgroundImage:"linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.3)), url(".concat(e.img,")")},children:[Object(f.jsx)("h3",{className:"text-city",children:e.name}),Object(f.jsx)("h4",{className:"text-country",children:e.country})]})}),G=n(49),L=n.n(G),H=(n(119),function(){return Object(f.jsx)("div",{className:"loading-container",children:Object(f.jsx)(L.a,{type:"Rings",color:"#FFF",height:"200",width:"200"})})}),F={getCities:function(){return function(){var e=Object(b.a)(j.a.mark((function e(t,n){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("https://mytinerary-castillo.herokuapp.com/api/cities");case 2:if((a=e.sent).data.success){e.next=5;break}throw new Error("Error connecting database");case 5:t({type:"GET_ALL_CITIES",payload:a.data.response});case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},filterCities:function(e){return function(t,n){t({type:"FILTER_CITIES",payload:e})}},getOneCity:function(e){return function(t,n){t({type:"GET_ONE_CITY",payload:e})}}},Y=function(e){var t=Object(a.useState)(!0),n=Object(i.a)(t,2),s=n[0],r=n[1],c=Object(o.c)((function(e){return e.cities.filteredCities})),u=Object(o.b)();Object(a.useEffect)((function(){window.scroll(0,0);try{u(F.getCities()),r(!1)}catch(t){e.history.push("/error"),console.error(t)}}),[u,e.history]);if(s)return Object(f.jsx)(H,{});var m=0===c.length?Object(f.jsx)("h2",{className:"alert-cities",children:"Ups! No cities were found."}):c.map((function(e){return Object(f.jsx)(l.b,{to:"/cities/".concat(e._id),className:"card-link",children:Object(f.jsx)(A,{name:e.name,country:e.country,img:e.img})},"".concat(e._id))}));return Object(f.jsxs)("div",{className:"cities-container",children:[Object(f.jsx)("video",{src:"/assets/bg-video2.mp4",autoPlay:!0,loop:!0,muted:!0}),Object(f.jsx)("input",{type:"text",placeholder:"Search for a city ",className:"cities-input",name:"filter",onChange:function(e){u(F.filterCities(e.target.value))}}),Object(f.jsx)("div",{className:"cities-section",children:m})]})},R={getItinerariesByCity:function(e){return function(){var t=Object(b.a)(j.a.mark((function t(n,a){var s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.a.get("https://mytinerary-castillo.herokuapp.com/api/itineraries/cities/".concat(e));case 2:if((s=t.sent).data.success){t.next=5;break}throw new Error("Error connecting database");case 5:n({type:"GET_ITINERARIES_BY_CITY",payload:s.data.response});case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},likeItinerary:function(e,t){return Object(b.a)(j.a.mark((function n(){var a;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,h.a.put("https://mytinerary-castillo.herokuapp.com/api/itinerary/like/".concat(e),{withCredentials:!0},{headers:{Authorization:"Bearer "+t}});case 3:return a=n.sent,n.abrupt("return",a);case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))},addComment:function(e,t,n){return Object(b.a)(j.a.mark((function a(){var s;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,h.a.put("https://mytinerary-castillo.herokuapp.com/api/itinerary/comments/".concat(e),{comment:t,type:"addComment"},{headers:{Authorization:"Bearer "+n}});case 3:return s=a.sent,a.abrupt("return",s.data.response);case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))},editComment:function(e,t,n){return Object(b.a)(j.a.mark((function a(){var s;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,h.a.put("https://mytinerary-castillo.herokuapp.com/api/itinerary/comments/".concat(e),{comment:t,type:"editComment"},{headers:{Authorization:"Bearer "+n}});case 3:if(!(s=a.sent).data.success){a.next=6;break}return a.abrupt("return",{success:!0,res:s.data.response});case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))},deleteComment:function(e,t,n){return Object(b.a)(j.a.mark((function a(){var s;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,h.a.put("https://mytinerary-castillo.herokuapp.com/api/itinerary/comments/".concat(e),{commentId:t,type:"deleteComment"},{headers:{Authorization:"Bearer "+n}});case 3:if(!(s=a.sent).data.success){a.next=6;break}return a.abrupt("return",s.data);case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))},getActivitiesItinerary:function(e){return Object(b.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.get("https://mytinerary-castillo.herokuapp.com/api/activities/".concat(e));case 3:if(!(n=t.sent).data.success){t.next=6;break}return t.abrupt("return",n.data.response[0].activities);case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))}},z=(n(120),n(121),function(e){return Object(f.jsx)("div",{className:"container-activities",children:Object(f.jsx)(C.a,{autoplay:!1,wrapAround:!1,animation:"zoom",cellAlign:"center",slidesToShow:1,renderBottomCenterControls:null,children:e.activities.map((function(e){return Object(f.jsx)("div",{className:"activity-slide",style:{backgroundImage:"url(".concat(e.img,")")},children:Object(f.jsx)("h3",{className:"activity-title",children:e.title})},e._id)}))})})}),M=n(50),W=n.n(M),D=function(e){var t=Object(o.c)((function(e){return e.users._id})),n=Object(o.c)((function(e){return e.users.token})),s=Object(a.useRef)(),r=Object(a.useState)(!1),c=Object(i.a)(r,2),l=c[0],u=c[1],m=e.newComment.user._id===t;Object(a.useEffect)((function(){u(!1)}),[e.render]);var d=Object(f.jsxs)("div",{className:"comment-container",children:[l?Object(f.jsxs)("div",{className:"box",children:[Object(f.jsx)("input",{type:"text",defaultValue:e.newComment.comment,ref:s,className:"input-edit"}),Object(f.jsx)("i",{className:"fas fa-paper-plane send",onClick:function(){return e.editNewComment(e.newComment._id,s.current.value,n)}}),Object(f.jsx)("i",{className:"fas fa-trash-alt delete",onClick:function(){W.a.fire({title:"Are you sure you want to delete this comment?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#a72626",cancelButtonColor:"#242424",confirmButtonText:"Yes, delete it!"}).then((function(t){t.isConfirmed&&(e.deleteComment(e.itinerary_id,e.newComment._id,n),U.b.success("Your comment has been deleted",{position:"bottom-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}))}))}})]}):Object(f.jsx)("p",{className:"comment-text",children:e.newComment.comment}),Object(f.jsx)("i",{className:"fas fa-edit edit",onClick:function(){return u(!l)}})]}),j=m?d:Object(f.jsx)("p",{className:"comment-text",children:e.newComment.comment});return Object(f.jsxs)("div",{className:"commentData",children:[Object(f.jsx)("div",{className:"user-photo",style:{backgroundImage:"url('".concat(e.newComment.user.photoUrl,"')")}}),Object(f.jsxs)("div",{className:"comment-container",children:[Object(f.jsx)("div",{className:"user-name",children:Object(f.jsxs)("p",{children:[e.newComment.user.firstName," ",e.newComment.user.lastName]})}),j]})]})},V=(n(132),function(e){var t=Object(o.b)(),n=Object(o.c)((function(e){return e.users.token})),s=Object(a.useState)(!1),r=Object(i.a)(s,2),c=r[0],l=r[1],u=Object(a.useState)(e.itineraryComments),m=Object(i.a)(u,2),d=m[0],j=m[1],b=Object(a.useRef)(),p=function(){var a=b.current.value;""!==a?t(R.addComment(e.itineraryId,a,n)).then((function(e){n?(j(e),b.current.value=""):U.b.error("Ups! You must be signed in to post a comment",{position:"bottom-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})})).catch((function(e){return console.log(e)})):U.b.warning("Ups! You can't post an empty comment",{position:"bottom-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},h=function(e,n,a){t(R.deleteComment(e,n,a)).then((function(e){if(!e.success)throw new Error("Problem deleting comment");j(d.filter((function(e){return e._id!==n})))})).catch((function(e){return console.log(e)}))},O=function(e,n,a){t(R.editComment(e,n,a)).then((function(t){t.success&&(d.forEach((function(t){t._id===e&&(t.comment=n)})),j(d),l(!c))})).catch((function(e){return console.log(e)}))};return Object(f.jsxs)("div",{className:"comments-section",children:[Object(f.jsx)("h4",{className:"comments-title",children:"Comments"}),Object(f.jsx)("div",{className:"display-comments",children:d.map((function(t){return Object(f.jsx)(D,{newComment:t,deleteComment:h,itinerary_id:e.itineraryId,editNewComment:O,render:c},t._id)}))}),Object(f.jsxs)("div",{className:"input-comment-container",children:[Object(f.jsx)("input",{type:"text",ref:b,className:"input-comment",onKeyPress:function(e){"Enter"===e.key&&p()},placeholder:n?"":"You must be signed in to post a comment"}),Object(f.jsx)("i",{className:"fas fa-paper-plane send",onClick:p,style:{cursor:"pointer"}})]})]})}),J=function(e){var t=Object(o.b)(),n=Object(o.c)((function(e){return e.users._id})),s=Object(o.c)((function(e){return e.users.token})),r=e.data,c=r.author,l=r.title,u=r.duration,m=r.price,d=r._id,p=r.img,h=r.likes,O=r.hashtags,g=r.comments,x=Object(a.useState)(!1),v=Object(i.a)(x,2),y=v[0],N=v[1],k=Object(a.useState)(h),C=Object(i.a)(k,2),w=C[0],I=C[1],S=Object(a.useState)([]),_=Object(i.a)(S,2),E=_[0],B=_[1],T=function(){var e=Object(b.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(R.getActivitiesItinerary(d));case 3:n=e.sent,B(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(b.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=4;break}U.b.error("Ups! You must be signed in to like this itinerary",{position:"bottom-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.next=8;break;case 4:return e.next=6,t(R.likeItinerary(d,s));case 6:n=e.sent,I(n.data.response);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)("section",{className:"itinerary-card",children:[Object(f.jsxs)("div",{className:"itinerary-container",children:[Object(f.jsxs)("div",{className:"author-info",children:[Object(f.jsx)("img",{src:c.imgUrl,alt:"User",className:"author-picture"}),Object(f.jsx)("p",{className:"author-name",children:c.name})]}),Object(f.jsxs)("div",{className:"itinerary-info",style:{backgroundImage:"linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.6)), url(".concat(p,")")},children:[Object(f.jsx)("h2",{className:"itinerary-title",children:l}),Object(f.jsxs)("div",{className:"itinerary-stats",children:[Object(f.jsxs)("p",{className:"itinerary-price",children:["Price:"," ",["","","","",""].fill("\ud83d\udcb2",0,m).map((function(e){return e}))]}),Object(f.jsxs)("p",{className:"itinerary-duration",children:["Duration: ",u," hours"]})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("button",{className:"itinerary-likes",style:{cursor:"pointer"},onClick:P,children:w.includes(n)?Object(f.jsx)("i",{className:"fas fa-heart"}):Object(f.jsx)("i",{className:"far fa-heart"})}),Object(f.jsx)("span",{className:"amount-likes itinerary-likes",children:w.length})]}),Object(f.jsx)("ul",{className:"itinerary-hashtags",children:O.map((function(e,t){return Object(f.jsxs)("li",{children:["#",e]},t)}))})]})]}),Object(f.jsxs)("div",{className:y?"activities-display":"itinerary-activities",children:[Object(f.jsx)("h3",{className:"activities-title",style:{display:y?"block":"none"},children:"Activities"}),Object(f.jsxs)("div",{className:"activities-section",style:{visibility:y?"visible":"hidden"},children:[Object(f.jsx)("div",{className:"activities-carousel",children:Object(f.jsx)(z,{activities:E})}),Object(f.jsx)(V,{itineraryId:d,itineraryComments:g})]})]}),Object(f.jsxs)("button",{className:"view-more",onClick:function(){N(!y),y||E.length||T()},children:["View More"," ",Object(f.jsx)("i",{className:y?"fas fa-angle-up":"fas fa-angle-down"})]})]},d)},q=function(e){var t=Object(o.c)((function(e){return e.cities.newCity})),n=Object(o.c)((function(e){return e.cities.allCities})),s=Object(o.c)((function(e){return e.itineraries.itinerariesByCity})),r=Object(o.b)(),c=Object(a.useState)(!0),l=Object(i.a)(c,2),u=l[0],m=l[1];if(Object(a.useEffect)((function(){if(window.scroll(0,0),!n.length)return e.history.push("/cities"),!1;try{r(F.getOneCity(e.match.params.id)),r(R.getItinerariesByCity(e.match.params.id)),m(!1)}catch(t){e.history.push("/error")}}),[]),u)return Object(f.jsx)(H,{});var d=0===s.length?Object(f.jsxs)("div",{className:"no-itineraries",children:[Object(f.jsx)("h3",{className:"no-itineraries__text",children:"Ups! We don't have any itineraries for this city yet."}),Object(f.jsx)("i",{className:"fas fa-sad-tear sad-face"})]}):s.map((function(e){return Object(f.jsx)(J,{data:e},e._id)}));return Object(f.jsxs)("div",{className:"city-container",children:[Object(f.jsxs)("div",{className:"city-hero",style:{backgroundImage:"linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(".concat(t.img,")")},children:[Object(f.jsx)("h1",{className:"city-name",children:t.name}),Object(f.jsx)("h2",{className:"city-country",children:t.country})]}),Object(f.jsxs)("div",{className:"itineraries-section",children:[Object(f.jsx)("h2",{className:"itineraries-section--title",children:"Look for your next adventure!"}),d,Object(f.jsx)(y,{path:"/cities",children:"Back to cities"})]})]})},X=(n(133),function(){return Object(f.jsxs)("footer",{className:"footer-container",children:[Object(f.jsx)("img",{src:"/assets/logo_small_icon_only.png",alt:"Logo",className:"footer-logo"}),Object(f.jsx)("h3",{className:"footer-text",children:"MyTinerary | 2021"}),Object(f.jsxs)("div",{className:"footer-links",children:[Object(f.jsx)(l.b,{to:"/",className:"footer-links-item",children:"Home"}),Object(f.jsx)(l.b,{to:"/cities",className:"footer-links-item",children:"Cities"})]})]})});var K=function(){var e=Object(o.b)();return Object(a.useEffect)((function(){localStorage.getItem("token")&&e(O.signInLocalStorage(localStorage.getItem("token")))})),Object(f.jsxs)(l.a,{children:[Object(f.jsx)(g,{}),Object(f.jsxs)(x.d,{children:[Object(f.jsx)(x.b,{path:"/",exact:!0,component:S}),Object(f.jsx)(x.b,{path:"/cities/:id",component:q}),Object(f.jsx)(x.b,{path:"/cities",exact:!0,component:Y}),Object(f.jsx)(x.b,{path:"/sign",exact:!0,component:P})]}),Object(f.jsx)(x.a,{to:"/"}),Object(f.jsx)(X,{}),Object(f.jsx)(U.a,{position:"bottom-rigth",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,limit:5})]})},Q=n(20),Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{allCities:[],filteredCities:[],newCity:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ALL_CITIES":return Object(c.a)(Object(c.a)({},e),{},{allCities:t.payload,filteredCities:t.payload});case"FILTER_CITIES":var n=e.allCities.filter((function(e){return e.name.toLowerCase().startsWith(t.payload.toLowerCase().trim())}));return Object(c.a)(Object(c.a)({},e),{},{filteredCities:n});case"GET_ONE_CITY":var a=e.allCities.find((function(e){return e._id===t.payload}));return Object(c.a)(Object(c.a)({},e),{},{newCity:a});default:return e}},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{itinerariesByCity:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ITINERARIES_BY_CITY":return Object(c.a)(Object(c.a)({},e),{},{itinerariesByCity:t.payload});default:return e}},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{token:null,firstName:null,photoUrl:null,_id:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_IN":return localStorage.setItem("token",t.payload.token),Object(c.a)(Object(c.a)({},e),{},{token:t.payload.token,firstName:t.payload.firstName,photoUrl:t.payload.photoUrl,_id:t.payload._id});case"SIGN_OUT":return localStorage.removeItem("token"),{token:null,firstName:null,photoUrl:null,_id:null};default:return e}},te=Object(Q.b)({cities:Z,itineraries:$,users:ee}),ne=n(51),ae=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Q.c,se=Object(Q.d)(te,ae(Object(Q.a)(ne.a)));r.a.render(Object(f.jsx)(o.a,{store:se,children:Object(f.jsx)(K,{})}),document.getElementById("root"))},22:function(e,t,n){},29:function(e,t,n){},68:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){}},[[134,1,2]]]);
//# sourceMappingURL=main.b50b731c.chunk.js.map